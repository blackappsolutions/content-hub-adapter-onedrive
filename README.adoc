= Content Hub Adapter "OneDrive"

Fork of https://github.com/CoreMedia/content-hub-adapter-onedrive, that provides the following additions:

. fixing a hard coded filter for SharePoints "Documents" folder which is "Dokumente" in german installationsM
. Migration to CoreMedia 2301.1.0
. Additional Documentation

== Set up a "OneDrive" for testing
Despite the name of this plugin presumes, this extension only works with MicroSoft's enterprise product "SharePoint".

*There is no way to set it up with the appropriate consumer product "SharePoint".*

"SharePoint" is part of https://www.microsoft.com/de-de/microsoft-365/business/microsoft-365-business-basic[Microsoft 365 Business Basic], which could be tested one month for free. You must provide a credit card, but you can cancel this subscription in this month at any time without being charged.

You can (and should) create a SharePoint "Team Website" right after you enrolled.

You must fill in this information into the field `driveId` in the link:docs/README.md[Studio Configuration] (see "Configure the Plugin").

The get the settings values for

. `clientId`
. `clientSecret`
. `tenantId`

go to link:https://entra.microsoft.com/#home[Microsoft Entra Admin Center] and register an app in the "Azure Active Directory".

image:docs/screenshots/MsEntraAdminCenter.png[Microsoft Entra Admin Center]

Here you can grab the `tenantId` (called "Mandanten-ID" on the image) from the overview page.

image:docs/screenshots/AzureActiveDirectoryOverview.png[Azure Active Directory Overview]

Now to the trickiest part: The App Registration.

Open the collapsed sidebar menu Applications (or "Anwendungen" in german) and click on
App-Registrations (or App-Registrierungen in german).

image:docs/screenshots/AppRegistrations.png[App-Registrations]

Then click on the Plus-Button ("New Registration" | "Neue Registrierung") and register your new app.

image:docs/screenshots/RegisterApp.png[Register App]

After that you can grab the `clientId`.

image:docs/screenshots/AppOverview.png[Register App]

Then go to "Certificates & Secret" ("Zertifikate & Geheimnisse" in german) and a "New secret client key ("Neuer geheimer Clientschl√ºssel" in german).

image:docs/screenshots/CertificatesAndSecrets.png[Certificates and Secrets]

Copy that "Value" ("Wert" in german) *immediately* (as you can't do it afterwards) and enter it as `clientSecret` in the "Studio Configuration".

image:docs/screenshots/CopySecretValue.png[Secret value]

Now you have retrieved all the config values the plugin needs.

In order to use the integration, you need to set up the appropriate API-Permissions (in german "API-Berechtigungen").

image:docs/screenshots/API-Permissions.png[API-Permissions]

To do so, click on "Microsoft Graph (1)" and add `Sites.FullControl.All`.

image:docs/screenshots/Application-Permissions.png[Application-Permissions]

*It is crucial, that you select the right box "Application-Permissions" ("Anwendungsberechtigungen" in german), because otherwise it will not work!*